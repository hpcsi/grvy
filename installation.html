<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GRVY-0.35.0: Installation and Linkage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GRVY-0.35.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">The GRVY Library</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation and Linkage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>libGRVY uses the GNU autotools suite (autoconf, automake, and libtool) for its development build system. This system is popular among the Linux development community and provides a familiar build environment for end users. The three basic steps of the autotools process are:</p>
<ul>
<li><a class="el" href="installation.html#Configuration">Configuration</a></li>
<li><a class="el" href="installation.html#Build">Build</a></li>
<li><a class="el" href="installation.html#Installation">Installation</a> <br  />
</li>
</ul>
<p>These installation steps are discussed in more detail below followed by information on how to <a class="el" href="installation.html#Linkage">link</a> against the library once installed. To initiate the build process starting from a release distribution, you should first untar the distribution and enter the top-level directory:</p>
<div class="fragment"><pre class="fragment">
&gt; tar xvfz grvy-0.35.0.tar.gz
&gt; cd grvy-0.35.0/            
<br  />

</pre></div><p><b>External Software Dependencies:</b></p>
<ul>
<li><a href="http://www.boost.org/">Boost C++ library </a> -&gt; <b>required</b> </li>
<li><a href="http://www.hdfgroup.org/HDF5/">HDF5 library</a> -&gt; <em>optional</em> </li>
<li>MPI library (e.g. <a href="http://mvapich.cse.ohio-state.edu/overview/mvapich2/">MVAPICH2</a>, <a href="http://www.open-mpi.org/">OpenMPI</a>, <a href="http://www.mcs.anl.gov/research/projects/mpich2/">MPICH2</a>) -&gt; <em>optional</em> </li>
</ul>
<p>The minimum software required to build libGRVY is a local copy of the Boost library. Note that you can choose to build libGRVY against a <em>header-only</em> version of Boost or a full library installation. A build using the header-only version will disable some miscellaneous libGRVY functionality which leverages Boost libraries (<a class="el" href="group___cmisc.html#ga871093ba0c18b29a2d8d6a0d3aeff065" title="Recursively copies contents of existing directory (from_dir) to a new directory (to_dir)....">grvy_copy_dir()</a>, in particular). Additional library functionality can be enabled via linkage to optional HDF and MPI libraries.</p>
<hr  />
<p><a class="anchor" id="Configuration"></a></p><h2>Configuration </h2>
<p>If Boost is installed and available within your default login environment, then libGRVY should automatically configure against the available installation. If, however, your Boost installation is in a non-standard location, use the <code>"--with-boost"</code> option to specify the location.</p>
<p>Since libGRVY provides a Fortran interface, a valid Fortran90 compiler is also required. To date, libGRVY has been successfully tested with <em>gfortran</em> and the Intel <em>ifort</em> compilers. The configuration step will look for available compilers in the user environment but as with any <em>autoconf</em> based configuration, these can be overridden with command line arguments (by setting <code>CXX</code>, <code>CC</code>, and <code>FC</code> appropriately). For full documentation on available configuration options, run <code>"configure --help"</code>. The examples below highlight common configuration examples:</p>
<p><em>Configure with Boost from default login environment (and request installation in user's ~/bin/grvy directory):</em> <br  />
</p>
<div class="fragment"><div class="line">&gt; ./configure --prefix=$HOME/bin/grvy </div>
</div><!-- fragment --><p><em>Or, configure with Boost from a specific directory:</em> <br  />
</p>
<div class="fragment"><div class="line">&gt; ./configure --prefix=$HOME/bin/grvy --with-boost=$MY_BOOST_DIR/boost-1.37.0 </div>
</div><!-- fragment --><p><em>Or, configure with specific Intel compilers:</em> <br  />
</p>
<div class="fragment"><div class="line">&gt; ./configure CXX=icpc CC=icc FC=ifort --prefix=$HOME/bin/grvy </div>
</div><!-- fragment --><p><em>Or, configure for Boost header-only compilation:</em> <br  />
</p>
<div class="fragment"><div class="line">&gt; ./configure --prefix=$HOME/bin/grvy --enable-boost-headers-only</div>
</div><!-- fragment --><p><em>Or, enable optional functionality requiring MPI:</em> <br  />
</p>
<div class="fragment"><div class="line">&gt; ./configure --prefix=$HOME/bin/grvy --enable-mpi</div>
</div><!-- fragment --><p><em>Or, enable optional functionality requiring HDF5:</em> <br  />
</p>
<div class="fragment"><div class="line">&gt; ./configure --prefix=$HOME/bin/grvy --with-hdf5=$MY_HDF5_DIR/bin/hdf5-1.8.4</div>
</div><!-- fragment --><p><a class="anchor" id="Build"></a></p><h2>Build </h2>
<p>Once configured, issue a <code>"make"</code> to build the software. If successful, this will build the libGRVY library (static and dynamic versions) along with relevant binaries and several examples.</p>
<div class="fragment"><div class="line">&gt; make </div>
</div><!-- fragment --><p><b> Verifying the build:</b> To verify that the software is working properly, a test option is provided to run a short suite of functionality tests against the local build. To run, issue a <code>"make
check"</code> to initiate the tests. If successful, output similar to the following will be generated (the exact number of tests will vary depending on version and configuration options):</p>
<div class="fragment"><div class="line"> &gt; make check</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Initializing GRVY Tests</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: init.sh</div>
<div class="line">PASS: C_input_read_variables</div>
<div class="line">PASS: C_input_nofile_available</div>
<div class="line">PASS: C_input_read_missing_variable</div>
<div class="line">PASS: C_input_register_variables</div>
<div class="line">PASS: C_input_register_read_missing_variable</div>
<div class="line">PASS: C_input_dos_newlines</div>
<div class="line">PASS: C_timer_sum</div>
<div class="line">PASS: C_timer_std_width.sh</div>
<div class="line">PASS: C_timer_expanded_width.sh</div>
<div class="line">PASS: C_timer_stats</div>
<div class="line">PASS: C_timer_baseline</div>
<div class="line">PASS: C_timer_no_init</div>
<div class="line">PASS: C_timer_with_reset</div>
<div class="line">PASS: C_timer_no_finalize.sh</div>
<div class="line">PASS: C_unique_dir</div>
<div class="line">PASS: C_wrapper_scratch_dir.sh</div>
<div class="line">PASS: C_math_isnan</div>
<div class="line">PASS: C_math_isinf</div>
<div class="line">PASS: C_check_file_path</div>
<div class="line">PASS: C_input_fdump</div>
<div class="line">PASS: C_wrapper_log.sh</div>
<div class="line">PASS: C_wrapper_log_printf.sh</div>
<div class="line">PASS: C_version</div>
<div class="line">PASS: C_version_stdout</div>
<div class="line">PASS: C_check_copy_dir</div>
<div class="line">PASS: C_hdf_hist_timing</div>
<div class="line">PASS: F_hdf_hist_timing</div>
<div class="line">PASS: CXX_input</div>
<div class="line">PASS: CXX_input_register_variables</div>
<div class="line">PASS: CXX_input_dump</div>
<div class="line">PASS: CXX_timer_std_width.sh</div>
<div class="line">PASS: CXX_timer_expanded_width.sh</div>
<div class="line">PASS: CXX_timer_no_init</div>
<div class="line">PASS: CXX_hdf_hist_timing</div>
<div class="line">PASS: F_wrapper_unique_dir.sh</div>
<div class="line">PASS: F_wrapper_scratch_dir.sh</div>
<div class="line">PASS: F_math</div>
<div class="line">PASS: F_wrapper_check_file_path.sh</div>
<div class="line">PASS: F_wrapper_log.sh</div>
<div class="line">PASS: F_input_read_variables</div>
<div class="line">PASS: F_input_nofile_available</div>
<div class="line">PASS: F_input_read_missing_variable</div>
<div class="line">PASS: F_input_register_variables</div>
<div class="line">PASS: F_input_read_bigstring</div>
<div class="line">PASS: F_input_dump.sh</div>
<div class="line">PASS: F_timer.sh</div>
<div class="line">PASS: F_timer_std_width.sh</div>
<div class="line">PASS: F_timer_expanded_width.sh</div>
<div class="line">PASS: F_version</div>
<div class="line">PASS: F_get_command_arguments.sh</div>
<div class="line">PASS: F_check_copy_dir</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Standalone Binaries</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">PASS: version</div>
<div class="line">PASS: hostinfo</div>
<div class="line">PASS: gadd.sh</div>
<div class="line">PASS: gadd_unknown_option.sh</div>
<div class="line">PASS: gadd_with_options.sh</div>
<div class="line">PASS: gdump.sh</div>
<div class="line">PASS: gdump_unknown_options.sh</div>
<div class="line">PASS: gdump_with_options.sh</div>
<div class="line">-------------------------------------------------------</div>
<div class="line">Finalizing GRVY Tests, have a snazzy day </div>
<div class="line">-------------------------------------------------------</div>
<div class="line"> </div>
<div class="line">PASS: finalize.sh</div>
<div class="line">===================</div>
<div class="line">All 61 tests passed</div>
<div class="line">===================</div>
</div><!-- fragment --><p><a class="anchor" id="Installation"></a></p><h2>Installation </h2>
<p>After the build is complete, issue a <code>"make install"</code> to install the library. The installation will consist of four top-level directories housing the library, binaries, include files, and example files. An example of the top-level directories after installation is shown below:</p>
<div class="fragment"><div class="line">&gt; make install </div>
</div><!-- fragment --><p>Top-level libGRVY installation directory:</p>
<div class="fragment"><div class="line">&gt; ls $HOME/bin/grvy/</div>
<div class="line">bin/ examples/  include/  lib/</div>
</div><!-- fragment --><p><a class="anchor" id="Linkage"></a></p><h2>Library Linkage</h2>
<p>To link an external C/C++ or Fortran application with an installed version of the library, the <code>include</code> directory must be added to the compilers include search path in order to access the <a class="el" href="grvy_8h.html">grvy.h</a> header file (or for Fortran, the <code>lib</code> directory should be added to access the pre-compiled grvy F90 module). The <code>lib</code> directory should also be added to the linker search path along with a request to link against the libGRVY library (and the Fortran interface for F90 applications). Several example link steps are provided below. These examples assume that the libGRVY library has been successfully built and installed previously in the users's ~/bin/grvy directory:</p>
<h3>C/C++ Example</h3>
<div class="fragment"><div class="line">&gt; $(CC) -I$HOME/bin/grvy/include app.c -L$HOME/bin/grvy/lib -lgrvy </div>
</div><!-- fragment --><h3>Fortran Example</h3>
<div class="fragment"><div class="line">&gt; $(FC) -I$HOME/bin/grvy/lib app.f90 -L$HOME/bin/grvy/lib -lgrvy -lgrvyf </div>
</div><!-- fragment --><p>To embed the dynamic library search path for the libGRVY library directly into the application executable, use an additional linker option as follows:</p>
<h3>C/C++ Example (with embedded rpath)</h3>
<div class="fragment"><div class="line">&gt; $(CC) -I$HOME/bin/grvy/include app.c -L$HOME/bin/grvy/lib \</div>
<div class="line">        -Wl,-rpath,$HOME/bin/grvy/lib -lgrvy </div>
</div><!-- fragment --><p><b>Important Note:</b> F90 module file formats are not consistent across multiple compilers. Therefore, a Fortran application and the libGRVY F90 interface <em>must</em> be built with the same Fortran compiler family to ensure compatibility. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr size="1"/><address style="text-align: right;"><small>
Generated on Mon Nov 29 2021 20:58:35 for GRVY-0.35.0
by&nbsp;<a href="http://www.doxygen.org/index.html">
<em>doxygen</em></a>
1.8.17</small></address>
</body>
</html>
