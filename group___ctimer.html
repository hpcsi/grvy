<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GRVY-0.35.0: Performance Timer Utilities</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GRVY-0.35.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Performance Timer Utilities<div class="ingroups"><a class="el" href="group___capi.html">C API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Performance Timer - Initialization and Timer Demarcation:</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp8c980e42714f1634a30bc4a9c2d03839"></a>The following routines provide support for defining one or more wall-clock timers around specific code regions. Individual timers are delineated by a unique <em>id</em>. In addition to timing specific code regions identified with begin/end calls, the library also tracks the total application time from when the timing library was first initialized. </p>
</td></tr>
<tr class="memitem:ga020842c70794721f54bc69dd2057e474"><td class="memItemLeft" align="right" valign="top"><a id="ga020842c70794721f54bc69dd2057e474"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga020842c70794721f54bc69dd2057e474">grvy_timer_init</a> (const char *description)</td></tr>
<tr class="separator:ga020842c70794721f54bc69dd2057e474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d0ed28b1f7f5f6a616e0f78c622735a"><td class="memItemLeft" align="right" valign="top"><a id="ga8d0ed28b1f7f5f6a616e0f78c622735a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga8d0ed28b1f7f5f6a616e0f78c622735a">grvy_timer_begin</a> (const char *id)</td></tr>
<tr class="separator:ga8d0ed28b1f7f5f6a616e0f78c622735a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c7802f0d367701a6d357494664a782e"><td class="memItemLeft" align="right" valign="top"><a id="ga0c7802f0d367701a6d357494664a782e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga0c7802f0d367701a6d357494664a782e">grvy_timer_end</a> (const char *id)</td></tr>
<tr class="separator:ga0c7802f0d367701a6d357494664a782e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaea7763cb17feae834c5dc9e1d3a2fd2"><td class="memItemLeft" align="right" valign="top"><a id="gaaea7763cb17feae834c5dc9e1d3a2fd2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaaea7763cb17feae834c5dc9e1d3a2fd2">grvy_timer_reset</a> ()</td></tr>
<tr class="separator:gaaea7763cb17feae834c5dc9e1d3a2fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3934b8ce9b977bacd5c8b6ba2f3bbcb1"><td class="memItemLeft" align="right" valign="top"><a id="ga3934b8ce9b977bacd5c8b6ba2f3bbcb1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga3934b8ce9b977bacd5c8b6ba2f3bbcb1">grvy_timer_finalize</a> ()</td></tr>
<tr class="separator:ga3934b8ce9b977bacd5c8b6ba2f3bbcb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f2397f44f3a6997a4c87643d746ebd2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga3f2397f44f3a6997a4c87643d746ebd2">grvy_timer</a> ()</td></tr>
<tr class="separator:ga3f2397f44f3a6997a4c87643d746ebd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Performance Timer - Global Timing Summary:</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp0596ad4a03cf41def9aed8029aaa16a2"></a>The following routines are useful for summarizing the measured performance timings for all defined timers and the global runtime. </p>
</td></tr>
<tr class="memitem:ga5250808855ca6f9692ebbbcea1ae374e"><td class="memItemLeft" align="right" valign="top"><a id="ga5250808855ca6f9692ebbbcea1ae374e"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga5250808855ca6f9692ebbbcea1ae374e">grvy_timer_elapsed_global</a> ()</td></tr>
<tr class="separator:ga5250808855ca6f9692ebbbcea1ae374e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga176dd4c35907057cad408540b19edb7a"><td class="memItemLeft" align="right" valign="top"><a id="ga176dd4c35907057cad408540b19edb7a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga176dd4c35907057cad408540b19edb7a">grvy_timer_summarize</a> ()</td></tr>
<tr class="separator:ga176dd4c35907057cad408540b19edb7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga588412ab0107fdc8e922e90ba7f655dc"><td class="memItemLeft" align="right" valign="top"><a id="ga588412ab0107fdc8e922e90ba7f655dc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga588412ab0107fdc8e922e90ba7f655dc">grvy_timer_set_summarize_width</a> (const int maxwidth)</td></tr>
<tr class="separator:ga588412ab0107fdc8e922e90ba7f655dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Performance Timer - Individual Timer Query Tools (exclusive timings):</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp649e8b69ab2f9389643d9620816e4068"></a>The following routines allow for the querying of defined performance timers. Note that, except for the global timer, these routines provide <em>exclusive</em> timing measurements (ie. they do not include runtime contributions from any embedded timers). </p>
</td></tr>
<tr class="memitem:gaa0adbc06a653cdc68c3895db86e85bfa"><td class="memItemLeft" align="right" valign="top"><a id="gaa0adbc06a653cdc68c3895db86e85bfa"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaa0adbc06a653cdc68c3895db86e85bfa">grvy_timer_elapsedseconds</a> (const char *id)</td></tr>
<tr class="separator:gaa0adbc06a653cdc68c3895db86e85bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a482b854d650ed4fffdc1dfedfe18cc"><td class="memItemLeft" align="right" valign="top"><a id="ga5a482b854d650ed4fffdc1dfedfe18cc"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga5a482b854d650ed4fffdc1dfedfe18cc">grvy_timer_stats_mean</a> (const char *id)</td></tr>
<tr class="separator:ga5a482b854d650ed4fffdc1dfedfe18cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6ebacfff491c48b418ff16fc42093fe"><td class="memItemLeft" align="right" valign="top"><a id="gaa6ebacfff491c48b418ff16fc42093fe"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaa6ebacfff491c48b418ff16fc42093fe">grvy_timer_stats_variance</a> (const char *id)</td></tr>
<tr class="separator:gaa6ebacfff491c48b418ff16fc42093fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0e8651a2fc1eb4055155c3670d55231"><td class="memItemLeft" align="right" valign="top"><a id="gad0e8651a2fc1eb4055155c3670d55231"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gad0e8651a2fc1eb4055155c3670d55231">grvy_timer_stats_min</a> (const char *id)</td></tr>
<tr class="separator:gad0e8651a2fc1eb4055155c3670d55231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33bb1f3552a733abc61b83dba4f54251"><td class="memItemLeft" align="right" valign="top"><a id="ga33bb1f3552a733abc61b83dba4f54251"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga33bb1f3552a733abc61b83dba4f54251">grvy_timer_stats_max</a> (const char *id)</td></tr>
<tr class="separator:ga33bb1f3552a733abc61b83dba4f54251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf417adee181fcecc9f9b70d6e44fe130"><td class="memItemLeft" align="right" valign="top"><a id="gaf417adee181fcecc9f9b70d6e44fe130"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaf417adee181fcecc9f9b70d6e44fe130">grvy_timer_stats_count</a> (const char *id)</td></tr>
<tr class="separator:gaf417adee181fcecc9f9b70d6e44fe130"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Performance Timer - Individual Timer Query Tools (inclusive timings):</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp0bf04407004652991f78aaf9a5329fd4"></a>The following routines also allow for the querying of defined performance timers. These are similar to the timing utilities above, except these versions provide <em>inclusive</em> timing measurements (ie. they provide wallclock measurements between the begin/end of each timer, including the time associated with any embedded timers). </p>
</td></tr>
<tr class="memitem:gaea082305991d2bf68ba560aaa5c466d2"><td class="memItemLeft" align="right" valign="top"><a id="gaea082305991d2bf68ba560aaa5c466d2"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaea082305991d2bf68ba560aaa5c466d2">grvy_timer_elapsedseconds_inc</a> (const char *id)</td></tr>
<tr class="separator:gaea082305991d2bf68ba560aaa5c466d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cff9e255cef398489dbc8c30ab2298d"><td class="memItemLeft" align="right" valign="top"><a id="ga8cff9e255cef398489dbc8c30ab2298d"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga8cff9e255cef398489dbc8c30ab2298d">grvy_timer_stats_mean_inc</a> (const char *id)</td></tr>
<tr class="separator:ga8cff9e255cef398489dbc8c30ab2298d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga103dc20245a4212a88ccf16fe9acdcce"><td class="memItemLeft" align="right" valign="top"><a id="ga103dc20245a4212a88ccf16fe9acdcce"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga103dc20245a4212a88ccf16fe9acdcce">grvy_timer_stats_variance_inc</a> (const char *id)</td></tr>
<tr class="separator:ga103dc20245a4212a88ccf16fe9acdcce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb100e76c840052516bf0159fd24b755"><td class="memItemLeft" align="right" valign="top"><a id="gafb100e76c840052516bf0159fd24b755"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gafb100e76c840052516bf0159fd24b755">grvy_timer_stats_min_inc</a> (const char *id)</td></tr>
<tr class="separator:gafb100e76c840052516bf0159fd24b755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2783f568c44f5cac02153a48685d9599"><td class="memItemLeft" align="right" valign="top"><a id="ga2783f568c44f5cac02153a48685d9599"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga2783f568c44f5cac02153a48685d9599">grvy_timer_stats_max_inc</a> (const char *id)</td></tr>
<tr class="separator:ga2783f568c44f5cac02153a48685d9599"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Performance Timing - Historical Logging:</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpa54e45bb5f88e02396afef80a07e90b2"></a>These routines provide support to store measured runtime performance into an HDF5 file for logging purposes (this functionality requires HDF5 library linkage during the libGRVY configuration phase). Results are stored on a per-machine basis and are appended to the HDF5 file with timestamps to document historical performance over time. Stored results can be retrieved using the API below or via standalone executables installed with libGRVY.</p>
<p>There are two primary modes for saving historical performance data:</p>
<p><b>Mode 1</b>: you are using the grvy_timer_* class of routines to define individual sections to monitor and want to save the global runtime measurement along with all individually defined subtimers.</p>
<p><b>Mode 2</b>: you are using other means to profile the application code and want to save a single global timing value. Routines for this mode are distinguished by the presence of an extra "timing" argument in the calling sequence.</p>
<p>In both modes, standard and expanded (exp) calling sequences are supported with the expanded version allowing additional optional runtime documentation (e.g. flops, code revision) to be provided. </p>
</td></tr>
<tr class="memitem:ga7ae55a9891dde3521ecc8636966f74ef"><td class="memItemLeft" align="right" valign="top"><a id="ga7ae55a9891dde3521ecc8636966f74ef"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga7ae55a9891dde3521ecc8636966f74ef">grvy_timer_save_hist</a> (const char *experiment_name, const char *comment, int num_procs, const char *filename)</td></tr>
<tr class="separator:ga7ae55a9891dde3521ecc8636966f74ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a5f2258d48d7531e536b1f44171b9dd"><td class="memItemLeft" align="right" valign="top"><a id="ga9a5f2258d48d7531e536b1f44171b9dd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#ga9a5f2258d48d7531e536b1f44171b9dd">grvy_timer_save_hist_exp</a> (const char *experiment_name, const char *comment, int num_procs, int jobId, const char *code_revision, double flops, const char *filename)</td></tr>
<tr class="separator:ga9a5f2258d48d7531e536b1f44171b9dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab6eb4eaf4b5bed4facf850975bb94a2"><td class="memItemLeft" align="right" valign="top"><a id="gaab6eb4eaf4b5bed4facf850975bb94a2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaab6eb4eaf4b5bed4facf850975bb94a2">grvy_timer_save_hist_ext</a> (double timing, const char *machinename, const char *experiment, const char *comment, int num_procs, const char *filename)</td></tr>
<tr class="separator:gaab6eb4eaf4b5bed4facf850975bb94a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1846b70e107ee1b55a36f6e59df87fe"><td class="memItemLeft" align="right" valign="top"><a id="gaa1846b70e107ee1b55a36f6e59df87fe"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaa1846b70e107ee1b55a36f6e59df87fe">grvy_timer_save_hist_ext_exp</a> (double timing, const char *machinename, const char *experiment, const char *comment, int num_procs, int jobId, const char *code_revision, double flops, const char *filename)</td></tr>
<tr class="separator:gaa1846b70e107ee1b55a36f6e59df87fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5f64179d32cd108d9ef8841f836ed14"><td class="memItemLeft" align="right" valign="top"><a id="gaa5f64179d32cd108d9ef8841f836ed14"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ctimer.html#gaa5f64179d32cd108d9ef8841f836ed14">grvy_summarize_hist_timing</a> (const char *filename, const char *delimiter, const char *outdir)</td></tr>
<tr class="separator:gaa5f64179d32cd108d9ef8841f836ed14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section presents available C routines for measuring runtime performance of specific code sections to aid in overall performance/statistical analysis, and to maintain historical performance records as application codes evolve or across alternate compute platforms. Individual code timers are defined based on begin/end demarcation around the desired code snippet to measure along with a unique user-provided id string. Note that individual timers can be nested and the library will report exclusive timing of the innermost timers. Various options are provided to interrogate timer measurements, statistics, and relative timer comparisons. A convenient use of these routines is to define timers around various important work constructs within your application and use the <a class="el" href="group___ctimer.html#ga176dd4c35907057cad408540b19edb7a" title="Print a concise summary of all defined timers to stdout. This routine shows the relative runtime perc...">grvy_timer_summarize()</a> function to obtain a concise summary of the runtime performance, variability, and relative wallclock comparisions. Example output using this approach is shown below: </p>
<div class="fragment"><div class="line">-----------------------------------------------------------------------------------------------</div>
<div class="line">GRVY Example Timing - Performance Timings:              |      Mean      Variance       Count</div>
<div class="line">--&gt; foo                 : 3.00978e+00 secs ( 64.0889 %) | [3.00978e-01  2.70727e-08         10]</div>
<div class="line">--&gt; boo                 : 1.17648e+00 secs ( 25.0513 %) | [1.17648e-01  2.35981e-08         10]</div>
<div class="line">--&gt; bar                 : 5.09513e-01 secs ( 10.8493 %) | [5.09513e-02  5.02795e-08         10]</div>
<div class="line">--&gt; Main Program        : 4.48704e-04 secs (  0.0096 %) | [4.48704e-04  0.00000e+00          1]</div>
<div class="line">--&gt; GRVY_Unassigned     : 4.02927e-05 secs (  0.0009 %)</div>
<div class="line"> </div>
<div class="line">    Total Measured Time = 4.69626e+00 secs (100.0000 %)</div>
<div class="line">-----------------------------------------------------------------------------------------------</div>
</div><!-- fragment --><p><b> Code Example</b>: A specific C example using the performance timing routines is available in <a class="el" href="_ctimer_example.html">timer.c</a>.</p>
<hr  />
 <h2 class="groupheader">Function Documentation</h2>
<a id="ga3f2397f44f3a6997a4c87643d746ebd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f2397f44f3a6997a4c87643d746ebd2">&#9670;&nbsp;</a></span>grvy_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double grvy_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Basic wallclock timer which provides the time since epoch in seconds. </p>
<dl class="section return"><dt>Returns</dt><dd>time since epoch in seconds </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"/><address style="text-align: right;"><small>
Generated on Mon Nov 29 2021 23:33:04 for GRVY-0.35.0
by&nbsp;<a href="http://www.doxygen.org/index.html">
<em>doxygen</em></a>
1.8.17</small></address>
</body>
</html>
